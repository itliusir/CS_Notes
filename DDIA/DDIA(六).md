# 事务

事务是应用程序将多个读写操作组合成一个逻辑单元的一种方式。整个事务要么成功要么失败。

事务的安全性保证通过由 ACID 来描述：

- **Atomicity** 原子性
- **Consistency** 一致性
- **Isolation** 隔离性
- **Durability** 持久性

也有比 ACID 更模糊的 BASE 描述

- **Basically Available** 基本可用性
- **Soft State** 软状态
- **Eventual consistency** 最终一致性



## 原子性

ACID原子性的定义特征是：**能够在错误时中止事务，丢弃该事务进行的所有写入变更的能力**

## 一致性

我们之前有讨论过副本一致性、最终一致性、一致性hash、线性一致性。

而在 ACID 的上下文中，一致性是指数据库在应用程序的特定概念中处于 “良好状态”

## 隔离性

在我们数据库服务端同时被多个客户端访问时，并且如果访问的是相同数据库记录，就可能会遇到并发问题。

ACID 意义上的隔离性指的是 **同时执行的事务是相互隔离的**。

## 持久化

**持久性** 是一个承诺，即一旦事务成功完成，即使发生硬件故障或数据库崩溃，写入的任何数据也不会丢失。

1. 在单节点数据库中，持久性通常意味着数据已被写入非易失性存储设备，如硬盘或SSD。它通常还包括WAL，以便在磁盘上的数据结构损坏时进行恢复。

2. 在带复制的数据库中，持久性可能意味着数据已成功复制到一些节点。为了提供持久性保证，数据库必须等到这些写入或复制完成后，才能报告事务成功提交。

